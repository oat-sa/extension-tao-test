{"version":3,"names":["define","Tests","deps","actions","editTest","_","context","module","providerLoaderFactory","providerRegistry","previewerFactory","type","uri","config","defaults","addList","previewers","load","bundle","then","providers","forEach","provider","registerProvider","name","getProvider","init","validateProvider","isFunction","TypeError","__","binder","feedback","loggerFactory","logger","register","testPreview","actionContext","previewerConfig","omit","readOnly","fullPage","pluginsOptions","isUndefined","decode","catch","err","error","$","lock","start","previewAction","getBy","state","disabled","isPreviewEnabled","updateState","each"],"sources":["/Users/martinnicholson/work/currentgen/tao-community-handlebars4/tao/views/build/config-wrap-start-default.js","../controller/routes.js","../previewer/factory.js","../controller/tests/action.js","../controller/tests/editTest.js","module-create.js","/Users/martinnicholson/work/currentgen/tao-community-handlebars4/tao/views/build/config-wrap-end-default.js"],"sourcesContent":["\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2020 (original work) Open Assessment Technologies SA\n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoTests/controller/routes',[],function(){\n    'use strict';\n    return {\n        'Tests' : {\n            'deps' : 'controller/tests/action',\n            'actions' : {\n                'editTest' : 'controller/tests/editTest'\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoTests/previewer/factory',[\n    'lodash',\n    'context',\n    'module',\n    'core/providerLoader',\n    'core/providerRegistry',\n    'core/logger'\n], function (\n    _,\n    context,\n    module,\n    providerLoaderFactory,\n    providerRegistry\n) {\n    'use strict';\n\n    /**\n     * Loads and display the test previewer\n     * @param {String} type - The type of previewer\n     * @param {String} uri - The URI of the test to load\n     * @param {Object} [config] - Some config entries\n     * @param {String} [config.fullPage] - Force the previewer to occupy the full window.\n     * @param {String} [config.readOnly] - Do not allow to modify the previewed test.\n     * @param {Object} [config.previewers] - Optionally load static adapters. By default take them from the module's config.\n     * @returns {Promise}\n     */\n    function previewerFactory(type, uri, config) {\n        config = _.defaults(config || {}, module.config());\n        return providerLoaderFactory()\n            .addList(config.previewers)\n            .load(context.bundle)\n            .then(function (providers) {\n                _.forEach(providers, function (provider) {\n                    previewerFactory.registerProvider(provider.name, provider);\n                });\n            })\n            .then(function () {\n                return previewerFactory.getProvider(type);\n            })\n            .then(function (provider) {\n                return provider.init(uri, config);\n            });\n    }\n\n    return providerRegistry(previewerFactory, function validateProvider(provider) {\n        if (!_.isFunction(provider.init)) {\n            throw new TypeError('The previewer provider MUST have a init() method');\n        }\n        return true;\n    });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 - 2020 (original work) Open Assessment Techniologies SA\n *\n */\ndefine('taoTests/controller/tests/action',[\n    'lodash',\n    'i18n',\n    'layout/actions/binder',\n    'uri',\n    'ui/feedback',\n    'core/logger',\n    'taoTests/previewer/factory',\n    'module'\n], function(_, __, binder, uri, feedback, loggerFactory, previewerFactory, module){\n    'use strict';\n\n    const logger = loggerFactory('taoTests/controller/action');\n\n    binder.register('testPreview', function testPreview(actionContext) {\n        const config = module.config();\n        const previewerConfig = _.omit({\n            readOnly: false,\n            fullPage: true,\n            pluginsOptions: config.pluginsOptions\n        }, _.isUndefined);\n\n        previewerFactory(config.provider,\n            uri.decode(actionContext.uri),\n            previewerConfig)\n            .catch(err => {\n                logger.error(err);\n                feedback().error(__('Test Preview is not installed, please contact to your administrator.'));\n            });\n    });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015-2019 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * Test edition controller\n *\n */\ndefine('taoTests/controller/tests/editTest',[\n    'jquery',\n    'ui/lock',\n    'module',\n    'layout/actions',\n],\tfunction($, lock, module, actions){\n    'use strict';\n\n    return {\n\n\n        /**\n         * Controller's entrypoint\n         */\n        start(){\n\n            const config = module.config();\n            const previewAction = actions.getBy('test-preview');\n            if (previewAction) {\n                previewAction.state.disabled = !config.isPreviewEnabled;\n                actions.updateState();\n            }\n\n            $('#lock-box').each(function() {\n                lock($(this)).register();\n            });\n        }\n    };\n});\n\n","\ndefine(\"taoTests/loader/taoTests.bundle\", function(){});\n","define(\"taoTests/loader/taoTests.min\", [\"taoItems/loader/taoItems.min\"], function(){});\n"],"mappings":"ACmBAA,MAAA,4CACA,aACA,OACAC,KAAA,EACAC,IAAA,2BACAC,OAAA,EACAC,QAAA,4BACA,CACA,CACA,CACA,GCTAJ,MAAA,+BACA,SACA,UACA,SACA,sBACA,wBACA,cACA,UACAK,CAAA,CACAC,OAAA,CACAC,MAAA,CACAC,qBAAA,CACAC,gBAAA,CACA,CACA,aAYA,SAAAC,iBAAAC,IAAA,CAAAC,GAAA,CAAAC,MAAA,EAEA,MADA,CAAAA,MAAA,CAAAR,CAAA,CAAAS,QAAA,CAAAD,MAAA,KAAAN,MAAA,CAAAM,MAAA,IACAL,qBAAA,GACAO,OAAA,CAAAF,MAAA,CAAAG,UAAA,EACAC,IAAA,CAAAX,OAAA,CAAAY,MAAA,EACAC,IAAA,UAAAC,SAAA,EACAf,CAAA,CAAAgB,OAAA,CAAAD,SAAA,UAAAE,QAAA,EACAZ,gBAAA,CAAAa,gBAAA,CAAAD,QAAA,CAAAE,IAAA,CAAAF,QAAA,CACA,EACA,GACAH,IAAA,YACA,OAAAT,gBAAA,CAAAe,WAAA,CAAAd,IAAA,CACA,GACAQ,IAAA,UAAAG,QAAA,EACA,OAAAA,QAAA,CAAAI,IAAA,CAAAd,GAAA,CAAAC,MAAA,CACA,EACA,CAEA,OAAAJ,gBAAA,CAAAC,gBAAA,UAAAiB,iBAAAL,QAAA,EACA,IAAAjB,CAAA,CAAAuB,UAAA,CAAAN,QAAA,CAAAI,IAAA,EACA,UAAAG,SAAA,qDAEA,QACA,EACA,GCpDA7B,MAAA,qCACA,SACA,OACA,wBACA,MACA,cACA,cACA,6BACA,SACA,UAAAK,CAAA,CAAAyB,EAAA,CAAAC,MAAA,CAAAnB,GAAA,CAAAoB,QAAA,CAAAC,aAAA,CAAAvB,gBAAA,CAAAH,MAAA,EACA,aAEA,MAAA2B,MAAA,CAAAD,aAAA,+BAEAF,MAAA,CAAAI,QAAA,wBAAAC,YAAAC,aAAA,OACA,CAAAxB,MAAA,CAAAN,MAAA,CAAAM,MAAA,GACAyB,eAAA,CAAAjC,CAAA,CAAAkC,IAAA,EACAC,QAAA,IACAC,QAAA,IACAC,cAAA,CAAA7B,MAAA,CAAA6B,cACA,EAAArC,CAAA,CAAAsC,WAAA,EAEAjC,gBAAA,CAAAG,MAAA,CAAAS,QAAA,CACAV,GAAA,CAAAgC,MAAA,CAAAP,aAAA,CAAAzB,GAAA,EACA0B,eAAA,EACAO,KAAA,CAAAC,GAAA,GACAZ,MAAA,CAAAa,KAAA,CAAAD,GAAA,EACAd,QAAA,GAAAe,KAAA,CAAAjB,EAAA,yEACA,EACA,EACA,GC1BA9B,MAAA,uCACA,SACA,UACA,SACA,iBACA,UAAAgD,CAAA,CAAAC,IAAA,CAAA1C,MAAA,CAAAJ,OAAA,EACA,aAEA,OAMA+C,MAAA,OAEA,CAAArC,MAAA,CAAAN,MAAA,CAAAM,MAAA,GACAsC,aAAA,CAAAhD,OAAA,CAAAiD,KAAA,iBACAD,aAAA,GACAA,aAAA,CAAAE,KAAA,CAAAC,QAAA,EAAAzC,MAAA,CAAA0C,gBAAA,CACApD,OAAA,CAAAqD,WAAA,IAGAR,CAAA,cAAAS,IAAA,YACAR,IAAA,CAAAD,CAAA,QAAAb,QAAA,EACA,EACA,CACA,CACA,GCjDAnC,MAAA,iDACAA,MCFA"}