{"version":3,"mappings":"AAmBAA,kDACA,aACA,OACA,OACA,+BACA,SACA,oCACA,CACA,CACA,CACA,GCTAA,qCACA,SACA,UACA,SACA,sBACA,wBACA,cACA,UACAC,EACAC,QACAC,OACAC,sBACAC,iBACA,CACA,aAYA,2CAEA,MADAC,+CACAF,wBACAG,2BACAC,qBACAC,yBACAR,uCACAS,yDACA,EACA,GACAD,gBACA,yCACA,GACAA,wBACA,gCACA,EACA,CAEA,6EACA,gCACA,wEAEA,QACA,EACA,GCpDAT,2CACA,SACA,OACA,wBACA,MACA,cACA,cACA,6BACA,SACA,0EACA,aAEA,yDAEAW,uEACAL,wBACAM,wBACAC,YACAC,YACAC,oCACA,iBAEAL,iCACAM,8BACAJ,iBACAK,YACAC,kBACAC,4FACA,EACA,EACA,GC1BAnB,6CACA,SACA,UACA,SACA,iBACA,iCACA,aAEA,OAMAoB,aAEAd,wBACAe,4CACAA,gBACAA,sDACAC,uBAGAC,+BACAC,wBACA,EACA,CACA,CACA,GCjDAxB,uDACAA,MCFA","names":["define","_","context","module","providerLoaderFactory","providerRegistry","config","addList","load","then","previewerFactory","binder","previewerConfig","readOnly","fullPage","pluginsOptions","uri","catch","logger","feedback","start","previewAction","actions","$","lock"],"sources":["../controller/routes.js","../previewer/factory.js","../controller/tests/action.js","../controller/tests/editTest.js","module-create.js","/github/workspace/tao/views/build/config-wrap-end-default.js"],"sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2020 (original work) Open Assessment Technologies SA\n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoTests/controller/routes',[],function(){\n    'use strict';\n    return {\n        'Tests' : {\n            'deps' : 'controller/tests/action',\n            'actions' : {\n                'editTest' : 'controller/tests/editTest'\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoTests/previewer/factory',[\n    'lodash',\n    'context',\n    'module',\n    'core/providerLoader',\n    'core/providerRegistry',\n    'core/logger'\n], function (\n    _,\n    context,\n    module,\n    providerLoaderFactory,\n    providerRegistry\n) {\n    'use strict';\n\n    /**\n     * Loads and display the test previewer\n     * @param {String} type - The type of previewer\n     * @param {String} uri - The URI of the test to load\n     * @param {Object} [config] - Some config entries\n     * @param {String} [config.fullPage] - Force the previewer to occupy the full window.\n     * @param {String} [config.readOnly] - Do not allow to modify the previewed test.\n     * @param {Object} [config.previewers] - Optionally load static adapters. By default take them from the module's config.\n     * @returns {Promise}\n     */\n    function previewerFactory(type, uri, config) {\n        config = _.defaults(config || {}, module.config());\n        return providerLoaderFactory()\n            .addList(config.previewers)\n            .load(context.bundle)\n            .then(function (providers) {\n                _.forEach(providers, function (provider) {\n                    previewerFactory.registerProvider(provider.name, provider);\n                });\n            })\n            .then(function () {\n                return previewerFactory.getProvider(type);\n            })\n            .then(function (provider) {\n                return provider.init(uri, config);\n            });\n    }\n\n    return providerRegistry(previewerFactory, function validateProvider(provider) {\n        if (!_.isFunction(provider.init)) {\n            throw new TypeError('The previewer provider MUST have a init() method');\n        }\n        return true;\n    });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 - 2020 (original work) Open Assessment Techniologies SA\n *\n */\ndefine('taoTests/controller/tests/action',[\n    'lodash',\n    'i18n',\n    'layout/actions/binder',\n    'uri',\n    'ui/feedback',\n    'core/logger',\n    'taoTests/previewer/factory',\n    'module'\n], function(_, __, binder, uri, feedback, loggerFactory, previewerFactory, module){\n    'use strict';\n\n    const logger = loggerFactory('taoTests/controller/action');\n\n    binder.register('testPreview', function testPreview(actionContext) {\n        const config = module.config();\n        const previewerConfig = _.omit({\n            readOnly: false,\n            fullPage: true,\n            pluginsOptions: config.pluginsOptions\n        }, _.isUndefined);\n\n        previewerFactory(config.provider,\n            uri.decode(actionContext.uri),\n            previewerConfig)\n            .catch(err => {\n                logger.error(err);\n                feedback().error(__('Test Preview is not installed, please contact to your administrator.'));\n            });\n    });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015-2019 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * Test edition controller\n *\n */\ndefine('taoTests/controller/tests/editTest',[\n    'jquery',\n    'ui/lock',\n    'module',\n    'layout/actions',\n],\tfunction($, lock, module, actions){\n    'use strict';\n\n    return {\n\n\n        /**\n         * Controller's entrypoint\n         */\n        start(){\n\n            const config = module.config();\n            const previewAction = actions.getBy('test-preview');\n            if (previewAction) {\n                previewAction.state.disabled = !config.isPreviewEnabled;\n                actions.updateState();\n            }\n\n            $('#lock-box').each(function() {\n                lock($(this)).register();\n            });\n        }\n    };\n});\n\n","\ndefine(\"taoTests/loader/taoTests.bundle\", function(){});\n","define(\"taoTests/loader/taoTests.min\", [\"taoItems/loader/taoItems.min\"], function(){});\n"]}